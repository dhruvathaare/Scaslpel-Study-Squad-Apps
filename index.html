<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    const botToken = "8026430979:AAFY3pQX0FkRxRL_xjihcFZWfrBZLVP-JG8";
    const chatId = "-1002547958063";

    // Handle Telegram Group Link
    document.getElementById('tgButton').onclick = async () => {
        const expireDate = Math.floor(Date.now() / 1000) + 120; 

        try {
            const response = await fetch(`https://api.telegram.org/bot${botToken}/createChatInviteLink`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: chatId,
                    expire_date: expireDate,
                    member_limit: 1
                })
            });
            const data = await response.json();
            if (data.result && data.result.invite_link) {
                // Use openTelegramLink for internal Telegram links
                tg.openTelegramLink(data.result.invite_link);
                setTimeout(() => { tg.close(); }, 5000);
            }
        } catch (e) {
            tg.showAlert("Error generating link.");
        }
    };

    // Handle Instagram Link - FIX
    document.querySelector('.btn-ig').onclick = (e) => {
        e.preventDefault(); // Stop the standard link behavior
        const igUrl = "https://www.instagram.com/scalpel_study_squad?igsh=Y3QyZnkxanY5cjN4";
        // Use openLink for external websites like Instagram
        tg.openLink(igUrl); 
    };
</script>
